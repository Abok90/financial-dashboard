<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„ÙŠØ©</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            --primary: #1a1a2e; --secondary: #16213e; --success: #10b981; --danger: #ef4444;
            --text: #e8e8e8; --text-muted: #9ca3af; --border: rgba(255, 255, 255, 0.1);
            --card-bg: rgba(22, 33, 62, 0.6);
        }
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            background-attachment: fixed; color: var(--text); min-height: 100vh; padding: 10px;
        }
        .container { max-width: 1400px; margin: 0 auto; position: relative; z-index: 1; }
        h1 {
            font-size: clamp(1.5em, 5vw, 2.5em); font-weight: 900;
            background: linear-gradient(135deg, #667eea 0%, #f5576c 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-align: center; margin-bottom: 8px;
        }
        .subtitle { color: var(--text-muted); font-size: clamp(0.85em, 3vw, 1em); text-align: center; margin-bottom: 20px; }
        .month-filter {
            background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--border);
            border-radius: 15px; padding: 15px; margin-bottom: 20px;
        }
        .filter-label { font-size: 0.9em; color: var(--text-muted); margin-bottom: 10px; display: block; }
        .month-buttons { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
        .month-btn {
            flex: 1; min-width: 70px; padding: 12px 12px;
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border);
            border-radius: 10px; color: var(--text); font-family: 'Cairo'; font-size: 0.85em;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        }
        .month-btn:active { transform: scale(0.95); }
        .month-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: rgba(102, 126, 234, 0.5); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px; margin-bottom: 20px;
        }
        .stat-card {
            background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--border);
            border-radius: 15px; padding: 14px; position: relative; min-height: 110px;
        }
        .stat-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
        }
        .stat-card.income::before { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .stat-card.expense::before { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .stat-card.profit::before { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .stat-card.loss::before { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); }
        .stat-icon { font-size: 24px; margin-bottom: 6px; }
        .stat-label { font-size: 0.75em; color: var(--text-muted); margin-bottom: 5px; }
        .stat-value {
            font-size: clamp(1.1em, 4vw, 1.5em); font-weight: 700;
            direction: ltr; text-align: right; word-break: break-all;
        }
        .stat-change {
            font-size: 0.75em; display: inline-flex; align-items: center; gap: 4px;
            padding: 3px 8px; border-radius: 15px; background: rgba(255, 255, 255, 0.05);
        }
        .stat-change.positive { color: var(--success); }
        .stat-change.negative { color: var(--danger); }
        .chart-card {
            background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--border);
            border-radius: 15px; padding: 14px; margin-bottom: 15px;
        }
        .chart-title { font-size: clamp(0.95em, 4vw, 1.15em); font-weight: 700; margin-bottom: 12px; }
        .chart-container { position: relative; height: 250px; }
        .chart-container.tall { height: 330px; }
        .table-card {
            background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--border);
            border-radius: 15px; padding: 14px; margin-bottom: 15px; overflow-x: auto;
        }
        table { width: 100%; border-collapse: separate; border-spacing: 0 6px; font-size: 0.82em; }
        thead th {
            text-align: right; padding: 9px 6px; font-weight: 600; color: var(--text-muted);
            font-size: 0.85em; border-bottom: 2px solid var(--border); white-space: nowrap;
        }
        tbody tr { background: rgba(255, 255, 255, 0.02); }
        tbody td { padding: 9px 6px; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        tbody td:first-child { border-right: 1px solid var(--border); border-radius: 8px 8px 0 0; }
        tbody td:last-child { border-left: 1px solid var(--border); border-radius: 0 0 8px 8px; }
        .amount { font-weight: 700; font-size: 0.92em; direction: ltr; text-align: right; white-space: nowrap; }
        .amount.positive { color: var(--success); }
        .amount.negative { color: var(--danger); }
        .progress-bar {
            width: 100%; height: 5px; background: rgba(255, 255, 255, 0.1);
            border-radius: 10px; overflow: hidden; margin-top: 5px;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            border-radius: 10px; transition: width 1s ease-out;
        }
        .footer { text-align: center; padding: 18px; color: var(--text-muted); font-size: 0.78em; margin-top: 25px; }
        @media (max-width: 600px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .stat-card { padding: 11px; min-height: 100px; }
            .chart-card, .table-card { padding: 11px; }
            table { font-size: 0.73em; }
            thead th, tbody td { padding: 7px 4px; }
        }
        @media (max-width: 400px) {
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h1>
            <p class="subtitle">ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª ÙˆØ§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>
        </header>
        <div class="month-filter">
            <span class="filter-label">ğŸ“… Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±:</span>
            <div class="month-buttons" id="monthButtons"></div>
        </div>
        <div id="dashboard"></div>
    </div>
    <script>
const fullData = {
    '2025-12': {income:1616837,expenses:1878688,profit:-261851,margin:-16.2,
        expensesByCategory:[{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ø§ÙŠØ¯Ø©',amount:458860,percentage:24.4,count:22},{name:'Ù‚Ù…Ø§Ø´',amount:510250,percentage:27.2,count:14},{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§ÙˆÙØ±',amount:211950,percentage:11.3,count:21},{name:'Ù…Ø±ØªØ¨Ø§Øª Ù…ØµÙ†Ø¹',amount:115130,percentage:6.1,count:6},{name:'Ù…Ø±ØªØ¨Ø§Øª Ø§ÙˆÙ†Ù„Ø§ÙŠÙ†',amount:100515,percentage:5.3,count:9}],
        incomeByType:[{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø¹Ø§ÙŠØ¯Ø©',amount:1025337,percentage:63.4},{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø£ÙˆÙØ±Ø³Ø§ÙŠØ²',amount:427355,percentage:26.4},{name:'Ø´Ø­Ù† Ø¯Ø§Ø®Ù„ÙŠ',amount:164145,percentage:10.2}]},
    '2026-01': {income:1464140,expenses:1514806,profit:-50666,margin:-3.5,
        expensesByCategory:[{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ø§ÙŠØ¯Ø©',amount:689500,percentage:45.5,count:31},{name:'Ù‚Ù…Ø§Ø´',amount:414650,percentage:27.4,count:13},{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§ÙˆÙØ±',amount:223000,percentage:14.7,count:29},{name:'Ù…Ø±ØªØ¨Ø§Øª Ù…ØµÙ†Ø¹',amount:82000,percentage:5.4,count:7},{name:'Ù…Ø±ØªØ¨Ø§Øª Ø§ÙˆÙ†Ù„Ø§ÙŠÙ†',amount:76250,percentage:5.0,count:7}],
        incomeByType:[{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø¹Ø§ÙŠØ¯Ø©',amount:898595,percentage:61.4},{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø£ÙˆÙØ±Ø³Ø§ÙŠØ²',amount:426380,percentage:29.1},{name:'Ø´Ø­Ù† Ø¯Ø§Ø®Ù„ÙŠ',amount:139165,percentage:9.5}]},
    '2026-02': {income:104360,expenses:18710,profit:85650,margin:82.1,
        expensesByCategory:[{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ø§ÙŠØ¯Ø©',amount:97000,percentage:51.8,count:4},{name:'Ù‚Ù…Ø§Ø´',amount:80000,percentage:42.7,count:2},{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§ÙˆÙØ±',amount:22000,percentage:11.8,count:4},{name:'Ù…Ø±ØªØ¨Ø§Øª Ø§ÙˆÙ†Ù„Ø§ÙŠÙ†',amount:10000,percentage:5.3,count:1}],
        incomeByType:[{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø¹Ø§ÙŠØ¯Ø©',amount:90000,percentage:86.2},{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø£ÙˆÙØ±Ø³Ø§ÙŠØ²',amount:14360,percentage:13.8}]},
    'all': {income:3185337,expenses:3412204,profit:-226867,margin:-7.12,
        expensesByCategory:[{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ø§ÙŠØ¯Ø©',amount:1245360,percentage:36.5,count:57},{name:'Ù‚Ù…Ø§Ø´',amount:1004900,percentage:29.4,count:29},{name:'Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§ÙˆÙØ±',amount:456950,percentage:13.4,count:54},{name:'Ù…Ø±ØªØ¨Ø§Øª Ù…ØµÙ†Ø¹',amount:197130,percentage:5.8,count:13},{name:'Ù…Ø±ØªØ¨Ø§Øª Ø§ÙˆÙ†Ù„Ø§ÙŠÙ†',amount:186765,percentage:5.5,count:17}],
        incomeByType:[{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø¹Ø§ÙŠØ¯Ø©',amount:2013932,percentage:63.2},{name:'Ø´Ø±ÙƒØ© Ø´Ø­Ù† Ø£ÙˆÙØ±Ø³Ø§ÙŠØ²',amount:868095,percentage:27.3},{name:'Ø´Ø­Ù† Ø¯Ø§Ø®Ù„ÙŠ',amount:303310,percentage:9.5}]}
};
let currentMonth='all',charts={};
function fmt(a){return new Intl.NumberFormat('ar-EG',{minimumFractionDigits:0,maximumFractionDigits:0}).format(a)+' Ø¬';}
function initMonthButtons(){
    document.getElementById('monthButtons').innerHTML=[
        {id:'all',label:'ÙƒÙ„ Ø§Ù„ÙØªØ±Ø©'},{id:'2025-12',label:'Ø¯ÙŠØ³Ù…Ø¨Ø± 2025'},
        {id:'2026-01',label:'ÙŠÙ†Ø§ÙŠØ± 2026'},{id:'2026-02',label:'ÙØ¨Ø±Ø§ÙŠØ± 2026'}
    ].map(m=>`<button class="month-btn ${m.id===currentMonth?'active':''}" onclick="selectMonth('${m.id}')">${m.label}</button>`).join('');
}
function selectMonth(id){currentMonth=id;document.querySelectorAll('.month-btn').forEach(b=>b.classList.toggle('active',b.onclick.toString().includes(id)));renderDashboard();}
function renderDashboard(){
    const d=fullData[currentMonth];if(!d)return;
    const isProfitable=d.profit>=0;
    document.getElementById('dashboard').innerHTML=`
        <div class="stats-grid">
            <div class="stat-card income"><div class="stat-icon">ğŸ’°</div><div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„Ø§Øª</div><div class="stat-value">${fmt(d.income)}</div></div>
            <div class="stat-card expense"><div class="stat-icon">ğŸ’¸</div><div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</div><div class="stat-value">${fmt(d.expenses)}</div></div>
            <div class="stat-card ${isProfitable?'profit':'loss'}"><div class="stat-icon">${isProfitable?'âœ…':'âŒ'}</div><div class="stat-label">${isProfitable?'ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­':'ØµØ§ÙÙŠ Ø§Ù„Ø®Ø³Ø§Ø±Ø©'}</div><div class="stat-value">${fmt(Math.abs(d.profit))}</div><div class="stat-change ${isProfitable?'positive':'negative'}">${d.margin.toFixed(2)}%</div></div>
        </div>
        <div class="chart-card"><h3 class="chart-title">Ø£ÙƒØ¨Ø± Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3><div class="chart-container tall"><canvas id="exp"></canvas></div></div>
        <div class="chart-card"><h3 class="chart-title">Ø§Ù„ØªØ­ØµÙŠÙ„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹</h3><div class="chart-container"><canvas id="inc"></canvas></div></div>
        <div class="table-card"><h3 class="chart-title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3><table><thead><tr><th>Ø§Ù„Ø¨Ù†Ø¯</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„Ù†Ø³Ø¨Ø©</th><th>Ø§Ù„Ø¹Ø¯Ø¯</th></tr></thead><tbody>
        ${d.expensesByCategory.map(i=>`<tr><td><strong>${i.name}</strong></td><td class="amount">${fmt(i.amount)}</td><td>${i.percentage.toFixed(1)}%<div class="progress-bar"><div class="progress-fill" style="width:${i.percentage}%"></div></div></td><td>${i.count}</td></tr>`).join('')}
        </tbody></table></div>
        <div class="footer"><p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Claude AI</p></div>
    `;
    Object.values(charts).forEach(c=>c.destroy());charts={};
    setTimeout(()=>{
        charts.exp=new Chart(document.getElementById('exp').getContext('2d'),{type:'doughnut',data:{labels:d.expensesByCategory.map(i=>i.name),datasets:[{data:d.expensesByCategory.map(i=>i.amount),backgroundColor:['rgba(102,126,234,0.8)','rgba(245,87,108,0.8)','rgba(79,172,254,0.8)','rgba(67,233,123,0.8)','rgba(251,191,36,0.8)'],borderWidth:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{color:'#e8e8e8',font:{family:'Cairo',size:window.innerWidth<600?10:12},padding:window.innerWidth<600?8:15}}}}});
        charts.inc=new Chart(document.getElementById('inc').getContext('2d'),{type:'pie',data:{labels:d.incomeByType.map(i=>i.name),datasets:[{data:d.incomeByType.map(i=>i.amount),backgroundColor:['rgba(67,233,123,0.8)','rgba(79,172,254,0.8)','rgba(251,191,36,0.8)'],borderWidth:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{color:'#e8e8e8',font:{family:'Cairo',size:window.innerWidth<600?10:12},padding:window.innerWidth<600?8:15}}}}});
    },100);
}
document.addEventListener('DOMContentLoaded',()=>{initMonthButtons();renderDashboard();});
    </script>
</body>
</html>
